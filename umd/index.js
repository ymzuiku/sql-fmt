!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("sqlstring")):"function"==typeof define&&define.amd?define(["sqlstring"],e):(n=n||self).sql=e(n.SqlString)}(this,function(p){"use strict";var T="sql"+Date.now();var n=function e(n){void 0===n&&(n="");var t=new String(n);t.sqlHelpKey=T;function r(n){return e(t+" "+n)}var i={engine:function(){return r("ENGINE=InnoDB DEFAULT CHARSET=utf8mb4")},comment:function(n){return r(p.escape(n))},default:function(n){return r("DEFAULT "+p.escape(n))},defaultNow:function(n){return r("DEFAULT CURRENT_TIMESTAMP")},notNull:function(){return r("NOT NULL")},increment:function(){return r("int unsigned NOT NULL AUTO_INCREMENT")},bigIncrement:function(){return r("bigint unsigned NOT NULL AUTO_INCREMENT")},int:function(){return r("int")},tinyint:function(){return r("tinyint")},smallint:function(){return r("smallint")},mediumint:function(){return r("mediumint")},bigint:function(){return r("bigint")},varchar:function(n){return r("varchar("+n+")")},now:function(){return r("CURRENT_TIMESTAMP")},notExists:function(){return r("not exists")},timestamp:function(){return r("timestamp")},createAt:function(){return r("create_at timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP")},updateAt:function(){return r("update_at timestamp NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP")},createAndUpdate:function(){return r("create_at timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP, update_at timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP")},primary:function(n){return r("primary key("+n+")")},unique:function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return r("unique("+n.join(",")+")")},key:function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return r("key index_"+n.join("_")+"("+n.join(",")+")")}};return Object.assign(t,i),t}(),m={string:1,boolean:1,number:1};function l(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=n[0],f=n.slice(1),s="";return t.forEach(function(n,e){var t=f[e],r=n.toLocaleLowerCase();s+=n.replace(/(\#)/,"");var i=r.length,u=r.lastIndexOf("where"),o=r.lastIndexOf("set"),a=r.lastIndexOf("#");if(void 0!==t){var c=typeof t;t.sqlHelpKey===T?s+=t:m[c]?s+=-1<a&&i-1<=a?t:p.escape(t):0<u&&i-7<u?s+=l.where(t):0<o&&i-5<o?s+=l.set(t):"[object Array]"===Object.prototype.toString.call(t)&&m[typeof t[0]]?s+=l.values(t):s+=l.insert(t)}}),s}return l.insert=function(t){if(!(t[0]&&"[object Array]"===Object.prototype.toString.call(t))){var n=Object.keys(t),e=n.map(function(n){return p.escapeId(n)}),r=n.map(function(n){var e=t[n];return p.escape(e)});return"("+e.join(", ")+") VALUES ("+r.join(", ")+")"}var i=Object.keys(t[0]),u=i.map(function(n){return p.escapeId(n)}),o=t.map(function(t){return"("+i.map(function(n){var e=t[n];return p.escape(e)}).join(", ")+")"});return"("+u.join(", ")+") VALUES "+o.join(", ")},l.where=function(t){return"("+Object.keys(t).map(function(e){var n=t[e];return"[object Array]"!==Object.prototype.toString.call(n)?p.escapeId(e)+" = "+p.escape(n):"("+n.map(function(n){return p.escapeId(e)+" = "+p.escape(n)}).join(" OR ")+")"}).join(" AND ")+")"},l.values=function(n){return""+n.map(function(n){return p.escape(n)}).join(", ")},l.set=function(t){return Object.keys(t).map(function(n){var e=t[n];return p.escapeId(n)+" = "+p.escape(e)}).join(", ")},l.escape=p.escape,l.escapeId=p.escapeId,l.format=p.format,l.h=n,l});
//# sourceMappingURL=index.js.map
